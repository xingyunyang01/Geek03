get_competitor_and_industry_data_prompt="""
请分析以下公司的竞争对手以及所处行业：
公司信息：
 - 市场：{market}
 - 公司名称：{stock_name}
 - 股票代码：{stock_code}

分析竞争对手的标准为：
1. 同行业内的主要上市公司
2. 业务模式相似的公司
3. 市值规模相近的公司
4. 主要业务重叠度高的公司

要求：
1.请返回3~5个竞争对手(需包含股票代码，公司名称，市场信息)，按竞争程度排序。
2.请返回关键财务比率的行业均值数据（如行业平均毛利率、净利率、市盈率等），并注明是什么行业

重要提示：
1.竞争对手只关注在A股或港股上市的公司，不关注美股等其他市场上市的公司或者未上市的公司
"""

get_competitor_info_prompt="""
请从以下内容中，将竞争对手公司信息提取出来。

上下文：
{context}

输出格式:
- 将您的响应格式化为包含以下字段的 JSON 对象：
   - "competitors": 竞争对手公司信息
     - "stock_name": 公司名称
     - "stock_code": 股票代码（纯数字股票代码，不要带HK SZ等标识）
     - "market": 市场

Example:
```json
{{
    "competitors": [
        {{
            "stock_name": "商汤科技",
            "stock_code": "00020",
            "market": "港股"
        }}
    ]
}}
"""

get_business_info_prompt="""
请获取以下公司的主营业务与核心竞争力：

公司信息：
 - 市场：{market}
 - 公司名称：{stock_name}
 - 股票代码：{stock_code}

名词解释： 
主营业务: 按产品/地区划分的收入和利润构成。
核心竞争力: 公司的技术专利、品牌价值、渠道优势、成本控制能力等描述性文本。行业地位: 市场份额、行业排名、主要竞争对手等信息。
"""

analyze_financial_data_user_prompt = """
以下是{company_name} 公司的过去三年财务数据：
文件:{files0}
内容:{report0}

文件:{files1}
内容:{report1}

文件:{files2}
内容:{report2}

请利用财务分析方法进行纵向的趋势分析
"""

compare_company_report_user_prompt = """
以下是基准公司：{source_name} 公司的过去三年财务数据：
文件:{source_files0}
内容:{source_report0}

文件:{source_files1}
内容:{source_report1}

文件:{source_files2}
内容:{source_report2}

以下是对比公司：{target_name} 公司的过去三年财务数据：
文件:{target_files0}
内容:{target_report0}

文件:{target_files1}
内容:{target_report1}

文件:{target_files2}
内容:{target_report2}

请利用财务分析方法对两家公司，分析基准公司相比对比公司的优劣势，完成对比分析报告
"""

generate_valuation_model_user_prompt = """
你是一名金融分析师，请根据以下{company_name} 公司的信息，构建估值与预测模型，模拟关键变量变化对财务结果的影响，最后生成一份报告。
2022年的财务数据如下：
文件:{files0_2022}
内容:{report0_2022}

文件:{files1_2022}
内容:{report1_2022}

文件:{files2_2022}
内容:{report2_2022}

文件:{files3_2022}
内容:{report3_2022}

2023年的财务数据如下：
文件:{files0_2023}
内容:{report0_2023}

文件:{files1_2023}
内容:{report1_2023}

文件:{files2_2023}
内容:{report2_2023}

文件:{files3_2023}
内容:{report3_2023}

2024年的财务数据如下：
文件:{files0_2024}
内容:{report0_2024}

文件:{files1_2024}
内容:{report1_2024}

文件:{files2_2024}
内容:{report2_2024}

文件:{files3_2024}
内容:{report3_2024}

竞争对手与行业均值数据如下：
{competitor_and_industry_data}

主营业务与核心竞争力如下：
{business_info}
"""

outline_prompt = """
你是一位顶级金融分析师和研报撰写专家。请基于以下背景和财务研报汇总内容，生成一份详尽的《{company_name}公司研报》分段大纲，要求：
- 以yaml格式输出，务必用```yaml和```包裹整个yaml内容，便于后续自动分割。
- 每一项为一个主要部分，每部分需包含：
  - part_title: 章节标题
  - part_desc: 本部分内容简介
- 章节需覆盖公司基本面、财务分析、行业对比、估值与预测、治理结构、投资建议、风险提示、数据来源等。
- 只输出yaml格式的分段大纲，不要输出正文内容。

【背景说明开始】
{background}
【背景说明结束】

【财务研报汇总内容开始】
{report_content}
【财务研报汇总内容结束】
"""

background = """
本报告基于自动化采集与分析流程，涵盖如下环节：
- 公司基础信息等数据均通过akshare、公开年报、主流财经数据源自动采集。
- 财务三大报表数据来源：东方财富-数据中心-年报季报-业绩快报
- 股东结构信息来源：东方财富网-股东信息
- 主营业务、行业信息通过搜索引擎自动抓取，引用了权威新闻、研报、公司公告等。
- 财务分析、对比分析、估值与预测均由大模型（如DeepSeek）自动生成，结合了行业对标、财务比率、治理结构等多维度内容。
- 相关数据与分析均在脚本自动化流程下完成，确保数据来源可追溯、分析逻辑透明。
- 详细引用与外部链接已在正文中标注。
- 数据接口说明与免责声明见文末。
"""

generate_section_prompt = """
你是一位顶级金融分析师和研报撰写专家。请基于以下内容，直接输出\"{part_title}\"这一部分的完整研报内容。

**重要要求：**
1. 直接输出完整可用的研报内容，以\"## {part_title}\"开头
2. 在正文中引用数据、事实、图片等信息时，适当位置插入参考资料符号（如[1][2][3]），符号需与文末引用文献编号一致
3. **图片引用要求（务必严格遵守）：**
   - 只允许引用【财务研报汇总内容】中真实存在的图片地址（格式如：./images/图片名字.png），必须与原文完全一致。
   - 禁止虚构、杜撰、改编、猜测图片地址，未在【财务研报汇总内容】中出现的图片一律不得引用。
   - 如需插入图片，必须先在【财务研报汇总内容】中查找，未找到则不插入图片，绝不编造图片。
   - 如引用了不存在的图片，将被判为错误输出。
4. 不要输出任何【xxx开始】【xxx结束】等分隔符
5. 不要输出\"建议补充\"、\"需要添加\"等提示性语言
6. 不要编造图片地址或数据
7. 内容要详实、专业，可直接使用

**数据来源标注：**
- 财务数据标注：（数据来源：东方财富-数据中心-年报季报-业绩快报[1]）
- 主营业务信息标注：（数据来源：互联网[2]）
- 股东结构信息标注：（数据来源：东方财富网-股东信息[3]）

【本次任务】
{part_title}

【已生成前文】
{prev_content}

【背景说明开始】
{background}
【背景说明结束】

【财务研报汇总内容开始】
{report_content}
【财务研报汇总内容结束】
"""